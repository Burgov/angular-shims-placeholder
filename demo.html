<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>demo</title>
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.1/normalize.min.css">
	<style type="text/css">
		/* These styles are for demo purposes only */
		body { margin: 4em 2em; }
		textarea { vertical-align: top; }
		.empty { color: green; }
		input[type=email]:invalid { box-shadow: none; } /* suppress Firefox default style */
		input[type=email]:not(.empty):valid { border: 2px solid green; }
		input[type=email]:not(.empty):invalid { border: 2px solid red; }
	</style>
</head>
<body ng-app="testApp">
	<h1>angular-shims-placeholder</h1>
	<p>Shimmed placeholders are <span class="empty">green</span> for demonstration purposes. Set the color with the .empty class. The shim is force enabled here, usually it is only active in older browsers that don't support the placeholder attribute.</p>
	<div>
		<div>Initially empty</div>
		<input type="text" ng-model="test.empty" placeholder="placeheld text">
		<input type="password" ng-model="test.empty2" placeholder="placeheld pass">
		<input type="email" ng-model="test.empty3" placeholder="placeheld email">
	</div>
	<div>
		<div>Pre-filled by model</div>
		<input type="text" ng-model="test.text" placeholder="placeheld text">
		<input type="password" ng-model="test.password" placeholder="placeheld pass">
	</div>
	<div>
		<div>linked</div>
		<input type="text" ng-model="test.linked" ng-trim="false" placeholder="placeheld text">
		<input type="password" ng-model="test.linked" ng-trim="false" placeholder="placeheld pass">
		<textarea rows="1" ng-model="test.linked" ng-trim="false" placeholder="placeheld textarea"></textarea>
	</div>
	<br>
	<div>
		<div>No model</div>
		<input type="text" placeholder="placeheld text">
		<input type="password" placeholder="placeheld pass">
		<input type="email" placeholder="placeheld email">
	</div>
	<div>
		<div>No model, pre-filled by value</div>
		<input class="clearable" type="text" placeholder="placeheld text" value="hello">
		<input class="clearable" type="password" placeholder="placeheld pass" value="secret">
		<button onclick="fillElements()">fill</button>
		<button onclick="clearElements()">clear</button>
	</div>

	<script src="bower_components/angular/angular.js"></script>
	<script src="lib/angular-placeholder.js"></script>
	<script>
		angular.module(['testApp'], ['ng.shims.placeholder'])
		.run(function($rootScope){
			$rootScope.test = {
				empty: '',
				text: 'hello from model',
				password: 'secret from model',
				linked: ''
			};
		});

		var fillElements = function () {
			var elements = document.getElementsByTagName('input');
			for (var i = 0; i < elements.length; i++) {
				var elem = angular.element(elements[i]);
				if (elem.hasClass('clearable')) { 
					elem.val('filler').triggerHandler('change');
				}
			}
		}
		var clearElements = function () {
			var elements = document.getElementsByTagName('input');
			for (var i = 0; i < elements.length; i++) {
				var elem = angular.element(elements[i]);
				if (elem.hasClass('clearable')) {
					elem.val('').triggerHandler('change');
				}
			}
		}

		// Force run in all browsers, not just IE
		angular.mock = 1;
	</script>
</body>
</html>